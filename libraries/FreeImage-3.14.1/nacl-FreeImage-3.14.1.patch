diff -bNaur FreeImage/Makefile FreeImage-nacl/Makefile
--- FreeImage/Makefile	2009-07-25 11:16:10.000000000 -0600
+++ FreeImage-nacl/Makefile	2010-12-01 16:40:11.000000000 -0700
@@ -1,7 +1,7 @@
 # Entry point for FreeImage makefiles
 # Default to 'make -f Makefile.gnu' for Linux and for unknown OS. 
 #
-OS = $(shell uname)
+OS ?= $(shell uname)
 MAKEFILE = gnu
 
 ifeq ($(OS), Darwin)
@@ -16,6 +16,9 @@
 ifeq ($(OS), windows32)
     MAKEFILE = mingw
 endif
+ifeq ($(OS), nacl)
+    MAKEFILE = nacl
+endif
 
 default:
 	$(MAKE) -f Makefile.$(MAKEFILE) 
diff -bNaur FreeImage/Makefile.nacl FreeImage-nacl/Makefile.nacl
--- FreeImage/Makefile.nacl	1969-12-31 17:00:00.000000000 -0700
+++ FreeImage-nacl/Makefile.nacl	2010-12-02 14:18:03.000000000 -0700
@@ -0,0 +1,63 @@
+# Native Client makefile for FreeImage
+
+# This file can be generated by ./gensrclist.sh
+include Makefile.srcs
+
+# General configuration variables:
+INCDIR ?= $(NACL_SDK_USR_INCLUDE)
+INSTALLDIR ?= $(NACL_SDK_USR_LIB)
+
+# Converts cr/lf to just lf
+DOS2UNIX = dos2unix
+
+LIBRARIES = -lstdc++
+
+MODULES = $(SRCS:.c=.o)
+MODULES := $(MODULES:.cpp=.o)
+CFLAGS ?= -O3 -fexceptions -fvisibility=hidden -DNO_LCMS
+CFLAGS += $(INCLUDE)
+CXXFLAGS ?= -O3 -fexceptions -fvisibility=hidden -Wno-ctor-dtor-privacy
+CXXFLAGS += $(INCLUDE)
+
+ifeq ($(shell sh -c 'uname -m 2>/dev/null || echo not'),x86_64)
+	CFLAGS += -fPIC
+	CXXFLAGS += -fPIC
+endif
+
+TARGET  = freeimage
+STATICLIB = lib$(TARGET).a
+SHAREDLIB = lib$(TARGET)-$(VER_MAJOR).$(VER_MINOR).dso
+LIBNAME	= lib$(TARGET).so
+VERLIBNAME = $(LIBNAME).$(VER_MAJOR)
+HEADER = Source/FreeImage.h
+
+default: all
+
+all: dist
+
+dist: FreeImage
+	cp *.a Dist
+	cp Source/FreeImage.h Dist
+
+dos2unix:
+	@$(DOS2UNIX) $(SRCS) $(INCLS)
+
+FreeImage: $(STATICLIB)
+
+.c.o:
+	$(CC) $(CFLAGS) -c $< -o $@
+
+.cpp.o:
+	$(CXX) $(CXXFLAGS) -c $< -o $@
+
+$(STATICLIB): $(MODULES)
+	$(AR) r $@ $(MODULES)
+
+install:
+	install -d $(INCDIR) $(INSTALLDIR)
+	install -m 644 $(HEADER) $(INCDIR)
+	install -m 644 $(STATICLIB) $(INSTALLDIR)
+
+clean:
+	rm -f core Dist/*.* u2dtmp* $(MODULES) $(STATICLIB) $(SHAREDLIB) $(LIBNAME)
+
diff -bNaur FreeImage/Source/LibOpenJPEG/opj_includes.h FreeImage-nacl/Source/LibOpenJPEG/opj_includes.h
--- FreeImage/Source/LibOpenJPEG/opj_includes.h	2010-05-16 07:59:08.000000000 -0600
+++ FreeImage-nacl/Source/LibOpenJPEG/opj_includes.h	2010-12-01 16:51:33.000000000 -0700
@@ -31,7 +31,6 @@
    Standard includes used by the library
  ==========================================================
 */
-#include <memory.h>
 #include <stdlib.h>
 #include <string.h>
 #include <math.h>
diff -bNaur FreeImage/Source/LibRawLite/dcraw/dcraw.c FreeImage-nacl/Source/LibRawLite/dcraw/dcraw.c
--- FreeImage/Source/LibRawLite/dcraw/dcraw.c	2010-08-09 21:10:38.000000000 -0600
+++ FreeImage-nacl/Source/LibRawLite/dcraw/dcraw.c	2010-12-01 17:44:10.000000000 -0700
@@ -78,7 +78,29 @@
 #else
 #include <unistd.h>
 #include <utime.h>
+#ifdef __native_client__
+/* NaCl does not have netinet.  The only routines this code needs are the
+ * byte-swapping ones.  Assume that all NaCl ISAs are little-endian.
+ */
+uint32_t htonl(uint32_t hostlong) {
+  return hostlong;
+}
+
+uint16_t htons(uint16_t hostshort) {
+  return hostshort;
+}
+
+uint32_t ntohl(uint32_t netlong) {
+  return netlong;
+}
+
+uint16_t ntohs(uint16_t netshort) {
+  return netshort;
+}
+#else
+#error __native_client__ undefined!
 #include <netinet/in.h>
+#endif
 typedef long long INT64;
 typedef unsigned long long UINT64;
 #endif
diff -bNaur FreeImage/Source/LibRawLite/internal/defines.h FreeImage-nacl/Source/LibRawLite/internal/defines.h
--- FreeImage/Source/LibRawLite/internal/defines.h	2010-08-01 05:58:38.000000000 -0600
+++ FreeImage-nacl/Source/LibRawLite/internal/defines.h	2010-12-02 09:01:08.000000000 -0700
@@ -73,7 +73,11 @@
 #else
 #include <unistd.h>
 #include <utime.h>
+#ifdef __native_client__
+#include "nacl_inet.h"
+#else
 #include <netinet/in.h>
+#endif
 #line 99 "dcraw/dcraw.c"
 #endif
 
diff -bNaur FreeImage/Source/LibRawLite/internal/nacl_inet.h FreeImage-nacl/Source/LibRawLite/internal/nacl_inet.h
--- FreeImage/Source/LibRawLite/internal/nacl_inet.h	1969-12-31 17:00:00.000000000 -0700
+++ FreeImage-nacl/Source/LibRawLite/internal/nacl_inet.h	2010-12-02 09:29:31.000000000 -0700
@@ -0,0 +1,33 @@
+#ifndef LIBRAWLITE_INTERNAL_NACL_INET_H_
+#define LIBRAWLITE_INTERNAL_NACL_INET_H_
+
+#ifdef __native_client__
+#include <stdint.h>
+/* NaCl does not have netinet.  The only routines the dcraw code needs are the
+ * byte-swapping ones.  Assume that all NaCl ISAs are little-endian.
+ */
+static inline uint16_t bswap_16(uint16_t x) {
+  return ((x >> 8) & 0xff) | ((x & 0xff) << 8);
+}
+
+static inline uint32_t bswap_32(uint32_t x) {
+  return (bswap_16(x & 0xffff) << 16) | (bswap_16(x >> 16) & 0xffff);
+}
+
+static uint32_t htonl(uint32_t hostlong) {
+  return bswap_32(hostlong);
+}
+
+static uint16_t htons(uint16_t hostshort) {
+  return bswap_16(hostshort);
+}
+
+static uint32_t ntohl(uint32_t netlong) {
+  return bswap_32(netlong);
+}
+
+static uint16_t ntohs(uint16_t netshort) {
+  return bswap_16(netshort);
+}
+#endif
+#endif  // LIBRAWLITE_INTERNAL_NACL_INET_H_
diff -bNaur FreeImage/Source/LibRawLite/libraw/libraw.h FreeImage-nacl/Source/LibRawLite/libraw/libraw.h
--- FreeImage/Source/LibRawLite/libraw/libraw.h	2010-08-07 01:48:42.000000000 -0600
+++ FreeImage-nacl/Source/LibRawLite/libraw/libraw.h	2010-12-01 16:58:19.000000000 -0700
@@ -28,7 +28,7 @@
 #endif
 
 #include <limits.h>
-#include <memory.h>
+#include <string.h>
 #include <stdio.h>
 #include <stdlib.h>
 
diff -bNaur FreeImage/Source/LibRawLite/src/libraw_cxx.cpp FreeImage-nacl/Source/LibRawLite/src/libraw_cxx.cpp
--- FreeImage/Source/LibRawLite/src/libraw_cxx.cpp	2010-07-06 03:48:16.000000000 -0600
+++ FreeImage-nacl/Source/LibRawLite/src/libraw_cxx.cpp	2010-12-02 09:03:34.000000000 -0700
@@ -23,7 +23,11 @@
 #include <float.h>
 #include <math.h>
 #ifndef WIN32
+#ifdef __native_client__
+#include "nacl_inet.h"
+#else
 #include <netinet/in.h>
+#endif
 #else
 #include <winsock2.h>
 #endif
diff -bNaur FreeImage/Source/OpenEXR/Imath/ImathMatrix.h FreeImage-nacl/Source/OpenEXR/Imath/ImathMatrix.h
--- FreeImage/Source/OpenEXR/Imath/ImathMatrix.h	2010-07-17 13:48:40.000000000 -0600
+++ FreeImage-nacl/Source/OpenEXR/Imath/ImathMatrix.h	2010-12-01 17:05:48.000000000 -0700
@@ -49,6 +49,7 @@
 #include "ImathVec.h"
 #include "ImathShear.h"
 
+#include <string.h>
 #include <iostream>
 #include <iomanip>
 
diff -bNaur FreeImage/Source/Utilities.h FreeImage-nacl/Source/Utilities.h
--- FreeImage/Source/Utilities.h	2010-08-13 01:42:02.000000000 -0600
+++ FreeImage-nacl/Source/Utilities.h	2010-12-01 16:55:14.000000000 -0700
@@ -30,7 +30,6 @@
 
 #include <math.h>
 #include <stdlib.h> 
-#include <memory.h>
 #include <stdio.h>
 #include <string.h>
 #include <stdarg.h>
