<!DOCTYPE html>
<html>
  <!--
  Copyright (c) 2010 The Native Client SDK Authors. All rights reserved.
  Use of this source code is governed by a BSD-style license that can be
  found in the LICENSE file.
  -->
<head>
  <title>Crypto Example</title>
  
  <script type="text/javascript">
    aesCodec = null;

    function moduleDidLoad() {
      aesCodec = document.getElementById('aesCodec');
    }
    
    function encrypt() {
      var pwd = document.getElementById("pwdElement").value;
      if (!pwd) {
        alert("Please, enter password");
        return;
      }
      var textArea = document.getElementById("textArea");
      if (aesCodec && aesCodec.Encrypt) {
        cipherText = aesCodec.Encrypt(pwd,textArea.value);
        if (cipherText)
          textArea.innerHTML = cipherText;
      }
    }

    function decrypt() {
      var pwd = document.getElementById("pwdElement").value;
      if (!pwd) {
        alert("Please, enter password");
        return;
      }
      var textArea = document.getElementById("textArea");
      if (aesCodec && aesCodec.Decrypt) {
        plainText = aesCodec.Decrypt(pwd,textArea.value);
        if (plainText)
          textArea.innerHTML = plainText;
      }
    }
  </script>
</head>
<body>
<embed name="aesCodec"
       id="aesCodec"
       width=0
       height=0
       type="application/x-nacl-srpc"/>

<script type="text/javascript">
  var nexes = 'x86-32: crypto_x86_32.nexe\n'
            + 'x86-64: crypto_x86_64.nexe\n'
            + 'ARM: crypto_arm.nexe ';
  document.getElementById('aesCodec').nexes = nexes;
  moduleDidLoad();
</script>

password
<input type=password id="pwdElement">
</input>
<button id="btn1" onclick=encrypt()>Encrypt</button>
<button onclick=decrypt()>Decrypt</button><br><br>
<textarea id="textArea" cols=80 rows=40>
// Copyright (c) 2010 The Chromium Authors. All rights reserved.
// Use of this source code is governed by a BSD-style license that can be
// found in the LICENSE file.

#ifndef PPAPI_C_PPB_VAR_H_
#define PPAPI_C_PPB_VAR_H_

#include "ppapi/c/pp_module.h"
#include "ppapi/c/pp_stdint.h"
#include "ppapi/c/pp_var.h"

struct PPP_Class;

#define PPB_VAR_INTERFACE "PPB_Var;1"

/**
 * @file
 * Defines the PPB_Var struct.
 * See http://code.google.com/p/ppapi/wiki/InterfacingWithJavaScript
 * for general information on using this interface.
 * {PENDING: Should the generated doc really be pointing to methods?}
 *
 * @addtogroup PPB
 * @{
 */

struct PPB_Var {
  /**
   * Adds a reference to the given var. If this is not a refcounted object,
   * this function will do nothing so you can always call it no matter what the
   * type.
   */
  void (*AddRef)(struct PP_Var var);

  /**
   * Removes a reference to given var, deleting it if the internal refcount
   * becomes 0. If the given var is not a refcounted object, this function will
   * do nothing so you can always call it no matter what the type.
</textarea>
<p>
</p>
</body>
</html>
